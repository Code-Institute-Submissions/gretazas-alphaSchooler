{% extends "base.html" %}
{% load static %}

{% block page_header %}
   <div class="container header-container">
       <div class="row">
           <div class="col"></div>
       </div>
   </div>
{% endblock %}
{% block content %}
   <div class="container-fluid">
       <div class="row">
           <div class="col text-center mt-3">
               {% for c in current_categories %}
                <a class="category-badge text-decoration-none" href="{% url 'products' %}?category={{ c.name }}">
                    <span class="p-2 mt-2 badge badge-white text-black rounded-0 border border-dark">{{ c.presentable_name }}</span>
                </a>
               {% endfor %}

                <ul class="navbar-nav w-auto mx-auto navbar-right flex-row-reverse">
                    <li class="nav-item dropdown">
                        <a class="p-2 mt-2 badge badge-white text-black rounded-0 border border-dark" href="#" id="all-products-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Sort Products by...
                        </a>
                        <div class="dropdown-menu border-0" aria-labelledby="all-products-link">
                            <a href="{% url 'products' %}?sort=price&direction=asc" class="dropdown-item">By Price</a>
                            <a href="{% url 'products' %}?sort=rating&direction=desc" class="dropdown-item ">By Rating</a>
                            <a href="{% url 'products' %}?sort=category&direction=asc" class="dropdown-item ">By Category</a>
                        </div>
                    </li>
                </ul> 
           </div>
       </div>

               <div class="row mx-5" id="content_img">
                   {% for product in products %}
                       <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
                           <div class="card h-100 border-0">
                               {% if product.image %}
                               <a id="product_img" href="">
                                   <img class="card-img-top img-fluid" src="/media/product_img/products({{ product.pk }}).jpg" alt="{{ product.name }}">
                               </a>
                               {% else %}
                               <a href="">
                                   <!-- <img class="card-img-top img-fluid" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}"> -->
                               </a>
                               {% endif %}
                               <div class="card-body pb-0">
                                   <p class="mb-0">{{ product.name }}</p>
                               </div>
                               <div class="card-footer bg-white pt-0 border-0 text-left">
                                   <div class="row">
                                       <div class="col">
                                           <p class="lead mb-0 text-left font-weight-bold" ><span style="color:rgb(16, 138, 138);">â‚¬</span>{{ product.price }}</p>
                                           {% if product.category %}
                                           <p class="small mt-1 mb-0">
                                               <a class="text-muted" href="">
                                                   <i class="fas fa-tag mr-1" style="box-shadow: 0px 2px 0px 0px rgb(236, 197, 139);color:rgb(9, 88, 88);"></i>{{ product.category.presentable_name }}
                                               </a>
                                           </p>
                                           {% endif %}
                                           {% if product.rating %}
                                               <small class="text-muted"><i class="fas fa-star mr-1" style="box-shadow: 0px 2px 0px 0px rgb(236, 197, 139);color:rgb(16, 138, 138);"></i>{{ product.rating }} / 5</small>
                                           {% else %}
                                               <small class="text-muted">No Rating</small>
                                           {% endif %}
                                           {% if request.user.is_superuser %}
                                               <small class="ml-3">
                                                   <a href="">Edit</a> |
                                                   <a class="text-danger" href="">Delete</a>
                                               </small>
                                           {% endif %}
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                       {% if forloop.counter|divisibleby:1 %}
                           <div class="col-12 d-sm-none mb-5">
                               <hr>
                           </div>
                       {% endif %}                       
                       {% if forloop.counter|divisibleby:2 %}
                           <div class="col-12 d-none d-sm-block d-md-block d-lg-none mb-5">
                               <hr>
                           </div>
                       {% endif %}
                       {% if forloop.counter|divisibleby:3 %}
                           <div class="col-12 d-none d-lg-block d-xl-none mb-5">
                               <hr>
                           </div>
                       {% endif %}
                       {% if forloop.counter|divisibleby:4 %}
                           <div class="col-12 d-none d-xl-block mb-5">
                               <hr>
                           </div>
                       {% endif %}
                   {% endfor %}
               </div>
           </div>
       </div>
   </div>
   <div class="btt-button shadow-sm rounded-0 border border-black">
       <a class="btt-link d-flex h-100">
           <i class="fas fa-arrow-up text-black mx-auto my-auto"></i>
       </a>	
   </div>
{% endblock %}


